<form #filterForm="ngForm" (change)="onChange()">
  <div class="row">
    <div
      [ngClass]="{
        'col-10': filterItems.length === 0,
        'col-7': filterItems.length > 0
      }"
    >
      <input
        type="text"
        name="search"
        autocomplete="off"
        class="form-control"
        (keyup)="onChange()"
        [(ngModel)]="criteria.searchTerm"
      />
    </div>
    <div *ngIf="filterItems.length > 0" class="col-3">
      <div ngbDropdown>
        <button
          class="btn btn-outline-primary"
          style="width: 100%"
          ngbDropdownToggle
        >
          <span *ngIf="usedFilterItems">({{ usedFilterItems }})&nbsp;</span>
          Filter
        </button>
        <div ngbDropdownMenu>
          <div
            ngbDropdownItem
            *ngFor="let filterItem of filterItems"
            (mouseup)="$event.stopPropagation()"
          >
            <ng-container
              *ngTemplateOutlet="
                filterItem.template;
                context: { $implicit: criteria }
              "
            ></ng-container>
          </div>
        </div>
      </div>
    </div>

    <div class="col-2">
      <button class="btn btn-outline-secondary" (click)="resetFilter()">
        Reset
      </button>
    </div>
  </div>
</form>
